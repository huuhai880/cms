CREATE PROCEDURE CRM_ACCOUNT_AFFILIATE_Update_AdminWeb
    @MEMBERID BIGINT = 0,
    @AFFILIATETYPEID BIGINT = 0,
    @AFFLEADERID BIGINT = 0,
    @PHONENUMBER VARCHAR(20) = NULL,
    @PROVINCEID BIGINT = 0,
    @DISTRICTID BIGINT = 0,
    @WARDID BIGINT = 0,
    @ADDRESS NVARCHAR(200) = NULL,
    @IDCARD VARCHAR(20) = NULL,
    @IDCARDDATE VARCHAR(20) = NULL,
    @IDCARDPLATE NVARCHAR(100) = NULL,
    @IDCARDBACKSIDE VARCHAR(500) = NULL,
    @IDCARDFRONTSIDE VARCHAR(500) = NULL,
    @LIVEIMAGE VARCHAR(500) = NULL,
    @ISAGREE BIT = 0,
    @ISACTIVE BIT = 0,
    @UPDATEDUSER VARCHAR(20) = NULL
AS
BEGIN

    UPDATE  CRM_ACCOUNT
    SET     UPDATEDDATE = GETDATE(),
            UPDATEDUSER = @UPDATEDUSER,
            ISAFFILIATE = 1,
            ISAGREE = @ISAGREE,
            ISACTIVE = @ISACTIVE,
            REGISTRATIONDATE = GETDATE(),
            DATEOFAPPROVAL = GETDATE(),
            STATUSAFFILIATE = 2, -- THANH CONG
            AFFILIATETYPEID = @AFFILIATETYPEID,
            REVIEWUSER = @UPDATEDUSER,
            REVIEWNOTE = N'Tạo đối tác và được duyệt từ Portal',
            REGISTRATIONSOURCE = 1, --Nguồn đăng ký 1:Portal, 2: Website
            PHONENUMBER = @PHONENUMBER,
            PROVINCEID = @PROVINCEID,
            DISTRICTID = @DISTRICTID,
            WARDID = @WARDID,
            ADDRESS = @ADDRESS,
            IDCARD = @IDCARD,
            IDCARDDATE = @IDCARDDATE,
            IDCARDPLACE = @IDCARDPLATE,
            IDCARDBACKSIDE = @IDCARDBACKSIDE,
            IDCARDFRONTSIDE = @IDCARDFRONTSIDE,
            LIVEIMAGE = @LIVEIMAGE
    WHERE   MEMBERID = @MEMBERID
END