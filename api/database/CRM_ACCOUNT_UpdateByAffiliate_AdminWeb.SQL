SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[CRM_ACCOUNT_UpdateByAffiliate_AdminWeb]
    @MEMBERID BIGINT = 0,
    @PHONENUMBER VARCHAR(20) = NULL,
    @PROVINCEID BIGINT = 0,
    @DISTRICTID BIGINT = 0,
    @WARDID BIGINT = 0,
    @ADDRESS NVARCHAR(200) = NULL,
    @IDCARD VARCHAR(20) = NULL,
    @IDCARDDATE VARCHAR(20) = NULL,
    @IDCARDPLACE NVARCHAR(100) = NULL,
    @IDCARDBACKSIDE VARCHAR(500) = NULL,
    @IDCARDFRONTSIDE VARCHAR(500) = NULL,
    @LIVEIMAGE VARCHAR(500) = NULL,
    @UPDATEDUSER VARCHAR(20) = NULL
AS 
BEGIN

    UPDATE  CRM_ACCOUNT
    SET     UPDATEDUSER = @UPDATEDUSER,
            UPDATEDDATE = GETDATE(),
            PHONENUMBER = @PHONENUMBER,
            PROVINCEID = @PROVINCEID,
            DISTRICTID = @DISTRICTID,
            WARDID = @WARDID,
            ADDRESS = @ADDRESS,
            IDCARD = @IDCARD,
            IDCARDDATE = IIF(@IDCARDDATE IS NOT NULL, CONVERT(DATETIME, @IDCARDDATE, 103), NULL),
            IDCARDPLACE = @IDCARDPLACE,
            IDCARDBACKSIDE = @IDCARDBACKSIDE,
            IDCARDFRONTSIDE = @IDCARDFRONTSIDE,
            LIVEIMAGE = @LIVEIMAGE
    WHERE   MEMBERID = @MEMBERID

END
GO
